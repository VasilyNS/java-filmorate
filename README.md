<h2 align="center">
    Проект java-filmorate<br><br>
</h2>

<h3 align="center">
    Список алгоритмов<br><br>
</h3>

Разработчик: Василий Сучков:<br>
- VS1 - создание нового пользователя 
- VS2 - получение пользователя по id
- VS3 - обновление пользователя
- VS4 - получение списка всех пользователей
- VS5 - добавление пользователя в друзья
- VS6 - вывод друзей пользователя
- VS7 - вывод общих друзей пользователей
- VS8 - удаление из друзей
- VS9 - создание фильма
- VS10 - получение фильма по id
- VS11 - обновление фильма
- VS12 - получение списка всех фильмов
- VS13 - добавление лайка фильму
- VS14 - удаление лайка фильму
- VS15 - вывод всех фильмов отсортированных по лайкам
- VS16 - вывод фильмов по режиссерам с указанной сортировкой
- VS17 - получение списка всех режиссеров
- VS18 - получение режиссера по id
- VS19 - создание нового режиссера
- VS20 - обновление режиссера
- VS21 - удаление режиссера
- VS22 - получение списка всех жанров
- VS23 - получение жанра по id
- VS24 - получение списка всех рейтингов MPA
- VS25 - получение рейтинга MPA по id

Разработчик: Денис Вьюнников:<br>
- DV1 - создание нового отзыва
- DV2 - обновление отзыва
- DV3 - удаление отзыва
- DV4 - получение отзыва по id
- DV5 - получение всех отзывов по идентификатору фильма
- DV6 - добавление лайка или дизлайка отзыву
- DV7 - удаление лайка или дизлайка отзыву

Разработчик: Егор Беляков:<br> 
- BE1 - вывод самых популярных фильмов по жанру и годам

Разработчик: Александр Николаев:<br>
- AN1 - вывод рекомендаций
- AN2 - поиск фильмов по части названия фильма
- AN3 - поиск фильмов по части имени режиссера

Разработчик: Руслан Феськов:<br>
- RF1 - удаление пользователя
- RF2 - удаление фильма 
- RF3 - вывод общих фильмов
- RF4 - создание нового события
- RF5 - получение ленты событий по id пользователя

<br><br><br>

<h3 align="center">
    Схема БД проекта<br><br>
    <img src="db.png">
</h3>

<h3 align="center">
    Описание таблиц в БД:
</h3>

- **"FILM"** - все фильмы системы
- **"USERS"** - все пользователи системы
- **"GENRE"** - таблица для связей один к многим, так как у фильма может быть много жанров,
  здесь будет список всех жанров для всех фильмов, соответственно, по film_id можно получить
  список всех жанров для этого фильма
- **"GENRE_BOOK"** - справочник жанров
- **"RATING_BOOK"** - справочник рейтингов
- **"LIKES"** - аналогично таблице **"GENRE"** связывает фильмы и пользователей, хранит все лайки.
  По user_id можно получить все лайки (id фильмов), которые поставил этот пользователь.
  По film_id можно получить все лайки (id пользователей), которые пользователи поставили этом фильму.
- **"FRIEND"** - таблица для хранения дружбы между пользователями. Одна строка - одна запись односторонней дружбы.

*Таблицы "LIKES" и "USERS" названы во множественном числе, чтобы не конфликтовать с зарезервированными словами SQL.*

<h3 align="center">
    Примеры основных SQL-запросов к БД
</h3>

Вывод всех фильмов по алфавиту, рейтинг выводится с описанием, а не просто по id:
```sql
SELECT f.name, f.description, rb.name AS RATING_NAME, f.release_date, f.duration FROM film AS f
LEFT JOIN rating_book AS rb ON f.rating_id = rb.rating_id
ORDER BY f.name 
```
Вывод всех названий жанров для фильма по film_id (для примера 4):
```sql
SELECT f.film_id, f.name, gb.name FROM genre AS g 
LEFT JOIN genre_book AS gb ON gb.genre_id = g.genre_id
LEFT JOIN film AS f ON g.film_id = f.film_id
WHERE g.film_id = 4
```
Вывод всех имен пользователей, кто поставил лайк фильму по film_id (для примера 4):
```sql
SELECT u.name FROM likes AS l 
LEFT JOIN users AS u ON l.user_id = u.user_id
WHERE l.film_id = 4
```
